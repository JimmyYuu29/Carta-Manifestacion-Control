{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "doc_type": "carta_manifestacion",
  "title": "Carta de Manifestacion Schema",
  "description": "Schema defining editable fields and validation rules for employee review",
  "fields": {
    "Nombre_Cliente": {
      "type": "string",
      "label": "Nombre del Cliente",
      "section": "cliente",
      "editable": true,
      "required": true,
      "validation": {
        "max_length": 200,
        "min_length": 1
      }
    },
    "Fecha_de_hoy": {
      "type": "date",
      "label": "Fecha de Hoy",
      "section": "fechas",
      "editable": false,
      "required": true
    },
    "Fecha_encargo": {
      "type": "date",
      "label": "Fecha del Encargo",
      "section": "fechas",
      "editable": true,
      "required": true
    },
    "FF_Ejecicio": {
      "type": "date",
      "label": "Fecha Fin del Ejercicio",
      "section": "fechas",
      "editable": true,
      "required": true
    },
    "Fecha_cierre": {
      "type": "date",
      "label": "Fecha de Cierre",
      "section": "fechas",
      "editable": true,
      "required": true
    },
    "Oficina_Seleccionada": {
      "type": "enum",
      "label": "Oficina Seleccionada",
      "section": "oficina",
      "editable": false,
      "required": true,
      "enum_values": ["ALICANTE", "BARCELONA", "BILBAO", "MADRID_ALCALA_63", "MADRID_ALCALA_61", "MALAGA", "VALENCIA", "VIGO", "PERSONALIZADA"]
    },
    "Direccion_Oficina": {
      "type": "string",
      "label": "Direccion de la Oficina",
      "section": "oficina",
      "editable": false,
      "required": true
    },
    "CP": {
      "type": "string",
      "label": "Codigo Postal",
      "section": "oficina",
      "editable": false,
      "required": true,
      "validation": {
        "pattern": "^[0-9]{5}$"
      }
    },
    "Ciudad_Oficina": {
      "type": "string",
      "label": "Ciudad",
      "section": "oficina",
      "editable": false,
      "required": true
    },
    "Lista_Abogados": {
      "type": "string",
      "label": "Lista de abogados y asesores fiscales",
      "section": "informacion_general",
      "editable": true,
      "required": false,
      "multiline": true
    },
    "anexo_partes": {
      "type": "string",
      "label": "Numero anexo partes vinculadas",
      "section": "informacion_general",
      "editable": true,
      "required": false,
      "validation": {
        "pattern": "^[0-9]+$"
      }
    },
    "anexo_proyecciones": {
      "type": "string",
      "label": "Numero anexo proyecciones",
      "section": "informacion_general",
      "editable": true,
      "required": false,
      "validation": {
        "pattern": "^[0-9]+$"
      }
    },
    "organo": {
      "type": "enum",
      "label": "Tipo de Organo de Administracion",
      "section": "organo_administracion",
      "editable": false,
      "required": true,
      "enum_values": ["consejo", "administrador_unico", "administradores"]
    },
    "comision": {
      "type": "boolean",
      "label": "Existe Comision de Auditoria?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "junta": {
      "type": "boolean",
      "label": "Incluir Junta de Accionistas?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "comite": {
      "type": "boolean",
      "label": "Incluir Comite?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "incorreccion": {
      "type": "boolean",
      "label": "Hay incorrecciones no corregidas?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "Anio_incorreccion": {
      "type": "string",
      "label": "Anio de la incorreccion",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "Epigrafe": {
      "type": "string",
      "label": "Epigrafe afectado",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "limitacion_alcance": {
      "type": "boolean",
      "label": "Hay limitacion al alcance?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "detalle_limitacion": {
      "type": "string",
      "label": "Detalle de la limitacion",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false,
      "multiline": true
    },
    "dudas": {
      "type": "boolean",
      "label": "Existen dudas sobre empresa en funcionamiento?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "rent": {
      "type": "boolean",
      "label": "Incluir parrafo sobre arrendamientos?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "A_coste": {
      "type": "boolean",
      "label": "Hay activos valorados a coste?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "experto": {
      "type": "boolean",
      "label": "Se utilizo un experto independiente?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "nombre_experto": {
      "type": "string",
      "label": "Nombre del experto",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "experto_valoracion": {
      "type": "string",
      "label": "Elemento valorado por experto",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "unidad_decision": {
      "type": "boolean",
      "label": "Bajo la misma unidad de decision?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "nombre_unidad": {
      "type": "string",
      "label": "Nombre de la unidad",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "nombre_mayor_sociedad": {
      "type": "string",
      "label": "Nombre de la mayor sociedad",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "localizacion_mer": {
      "type": "string",
      "label": "Localizacion mercantil",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "activo_impuesto": {
      "type": "boolean",
      "label": "Hay activos por impuestos diferidos?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "ejercicio_recuperacion_inicio": {
      "type": "string",
      "label": "Ejercicio inicio recuperacion",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "ejercicio_recuperacion_fin": {
      "type": "string",
      "label": "Ejercicio fin recuperacion",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false
    },
    "operacion_fiscal": {
      "type": "boolean",
      "label": "Operaciones en paraisos fiscales?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "detalle_operacion_fiscal": {
      "type": "string",
      "label": "Detalle operaciones paraisos fiscales",
      "section": "opciones_condicionales",
      "editable": true,
      "required": false,
      "multiline": true
    },
    "compromiso": {
      "type": "boolean",
      "label": "Compromisos por pensiones?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "gestion": {
      "type": "boolean",
      "label": "Incluir informe de gestion?",
      "section": "opciones_condicionales",
      "editable": false,
      "required": false
    },
    "lista_alto_directores": {
      "type": "list",
      "label": "Altos Directivos",
      "section": "alta_direccion",
      "editable": true,
      "required": false,
      "item_schema": {
        "nombre": {
          "type": "string",
          "required": true,
          "label": "Nombre completo"
        },
        "cargo": {
          "type": "string",
          "required": true,
          "label": "Cargo"
        }
      }
    },
    "Nombre_Firma": {
      "type": "string",
      "label": "Nombre del firmante",
      "section": "firma",
      "editable": true,
      "required": true
    },
    "Cargo_Firma": {
      "type": "string",
      "label": "Cargo del firmante",
      "section": "firma",
      "editable": true,
      "required": true
    }
  },
  "sections": [
    {"id": "cliente", "title": "Informacion del Cliente", "order": 1},
    {"id": "fechas", "title": "Fechas", "order": 2},
    {"id": "oficina", "title": "Informacion de la Oficina", "order": 3},
    {"id": "informacion_general", "title": "Informacion General", "order": 4},
    {"id": "organo_administracion", "title": "Organo de Administracion", "order": 5},
    {"id": "opciones_condicionales", "title": "Opciones Condicionales", "order": 6},
    {"id": "alta_direccion", "title": "Alta Direccion", "order": 7},
    {"id": "firma", "title": "Firma", "order": 8}
  ]
}
